<article
  appHover
  (hoverEmitter)="hovered = !hovered"
  [ngClass]="{
    'border-4 border-figma-green': isSelected,
    'flex flex-col max-w-[297px] w-full h-[245px] gap-[9px]': isGrid,
    'grid grid-cols-2 gap-6 w-[618px] h-[166px]': !isGrid
  }"
>
  <div class="relative w-[297px] h-[166px] border rounded-2xl p-[4.5px]">
    <img
      class="object-contain max-w-full max-h-full"
      [ngSrc]="
        (!!product.coverImage
          ? product.coverImage
          : product.productCoverImage || ''
        ) | cloudinaryUrl
      "
      height="166"
      width="297"
      priority
      [alt]="'image of ' + product.productName"
    />
    <button
      *ngIf="hovered"
      (click)="buyNow(product.id)"
      class="absolute w-[85px] h-[23px] m-auto left-0 right-0 rounded-lg bottom-[9px] px-[17px] pb-0.5 bg-[#DADADA8F]"
    >
      <span class="text-figma-green text-xs">Buy Now</span>
    </button>
  </div>
  <div class="flex flex-col pr-[7.5px]">
    <div class="flex items-center justify-between">
      <p
        class="font-bold max-w-[145px] overflow-hidden whitespace-nowrap text-ellipsis"
      >
        {{ product.productName }}
      </p>
      <div class="flex gap-2 items-center">
        <button
          [ngClass]="colored ? 'text-amber-300' : ''"
          (click)="addToCompare(product.id)"
        >
          <svg
            width="16"
            height="18"
            viewBox="0 0 16 18"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M8.00065 0.0410156C8.34582 0.0410156 8.62565 0.320832 8.62565 0.666016V1.49935C8.62565 1.61441 8.7189 1.70768 8.83398 1.70768C9.17915 1.70768 9.45898 1.9875 9.45898 2.33268C9.45898 2.67786 9.17915 2.95768 8.83398 2.95768C8.7189 2.95768 8.62565 3.05095 8.62565 3.16602V14.8327C8.62565 14.9477 8.7189 15.0411 8.83398 15.0411C9.17915 15.0411 9.45898 15.3208 9.45898 15.6661C9.45898 16.0112 9.17915 16.2911 8.83398 16.2911C8.7189 16.2911 8.62565 16.3843 8.62565 16.4994V17.3327C8.62565 17.6779 8.34582 17.9577 8.00065 17.9577C7.65548 17.9577 7.37565 17.6779 7.37565 17.3327V16.7077C7.37565 16.4776 7.18907 16.2911 6.95898 16.2911H3.00065C1.735 16.2911 0.708984 15.265 0.708984 13.9994V3.99935C0.708984 2.73369 1.735 1.70768 3.00065 1.70768H6.95898C7.18907 1.70768 7.37565 1.52113 7.37565 1.29102V0.666016C7.37565 0.320832 7.65548 0.0410156 8.00065 0.0410156ZM7.37565 3.37435C7.37565 3.14422 7.18907 2.95768 6.95898 2.95768H3.00065C2.42535 2.95768 1.95898 3.42405 1.95898 3.99935V13.9994C1.95898 14.5746 2.42535 15.0411 3.00065 15.0411H6.95898C7.18907 15.0411 7.37565 14.8545 7.37565 14.6244V3.37435ZM11.5423 2.33268C11.5423 1.9875 11.8222 1.70768 12.1673 1.70768H13.0007C14.2663 1.70768 15.2923 2.73369 15.2923 3.99935V4.83268C15.2923 5.17786 15.0125 5.45768 14.6673 5.45768C14.3222 5.45768 14.0423 5.17786 14.0423 4.83268V3.99935C14.0423 3.42405 13.576 2.95768 13.0007 2.95768H12.1673C11.8222 2.95768 11.5423 2.67786 11.5423 2.33268ZM14.6673 7.54105C15.0125 7.54105 15.2923 7.8208 15.2923 8.16605V9.83272C15.2923 10.1779 15.0125 10.4577 14.6673 10.4577C14.3222 10.4577 14.0423 10.1779 14.0423 9.83272V8.16605C14.0423 7.8208 14.3222 7.54105 14.6673 7.54105ZM14.6673 12.5411C15.0125 12.5411 15.2923 12.8208 15.2923 13.1661V13.9994C15.2923 15.265 14.2663 16.2911 13.0007 16.2911H12.1673C11.8222 16.2911 11.5423 16.0112 11.5423 15.6661C11.5423 15.3208 11.8222 15.0411 12.1673 15.0411H13.0007C13.576 15.0411 14.0423 14.5746 14.0423 13.9994V13.1661C14.0423 12.8208 14.3222 12.5411 14.6673 12.5411Z"
              fill="currentColor"
            />
          </svg>
        </button>
        <button
          (click)="
            product.configurationUrl || product.isWishListItem
              ? removeFromWishlist(product.id)
              : addToWishlist(product.id)
          "
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-6 h-6"
            [ngClass]="
              product.configurationUrl || product.isWishListItem
                ? 'text-[#F59E0B] fill-[#F59E0B]'
                : ''
            "
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"
            />
          </svg>
        </button>
      </div>
    </div>
    <p
      class="text-product-text font-[500] text-sm max-w-[145px] overflow-hidden whitespace-nowrap text-ellipsis"
    >
      {{
        product.productBrand ? product.productBrand : product.productCaseName
      }}
    </p>
    <div
      [ngClass]="!isGrid ? 'mt-[38px]' : ''"
      class="flex items-center justify-between"
    >
      <p
        class="text-sm font-[500] max-w-[145px] overflow-hidden whitespace-nowrap text-ellipsis"
      >
        {{ product.totalPrice || product.productPrice | currency }}
      </p>
      <button
        (click)="onNavigateToProduct($event, product.id)"
        class="flex items-center w-fit gap-[10px] text-figma-green"
      >
        <span class="text-sm font-[500]">configure</span>
        <img src="/assets/arrow-right.svg" alt="" />
      </button>
    </div>
  </div>
</article>
