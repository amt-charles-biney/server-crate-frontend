<aside class="col-span-1 flex flex-col gap-3">
    <form [formGroup]="filterForm" class="flex flex-col border">
      <h3 class="font-semibold text-lg border-b p-3">Filters</h3>
      <mat-accordion class="border-b">
        <mat-expansion-panel class="mat-elevation-z0" [expanded]="true">
          <mat-expansion-panel-header>
            <mat-panel-title class="text-[16px]">
              Shop By Price
            </mat-panel-title>
          </mat-expansion-panel-header>
          <ul formGroupName="price" class="flex flex-col gap-2">
            <li>
              <app-custom-check-box
                (changeHandler)="itemSelected($event, 'price')"
                formControlName="price1"
                name="0-500"
                value="0-500"
                label="$0 - $500"
              />
            </li>
            <li>
              <app-custom-check-box
                (changeHandler)="itemSelected($event, 'price')"
                formControlName="price2"
                name="500-1000"
                value="500-1000"
                label="$500 - $1000"
              />
            </li>
            <li>
              <app-custom-check-box
                (changeHandler)="itemSelected($event, 'price')"
                formControlName="price3"
                name="1000-1500"
                value="1000-1500"
                label="$1000 - $1500"
              />
            </li>
            <li>
              <app-custom-check-box
                (changeHandler)="itemSelected($event, 'price')"
                formControlName="price4"
                name="> 1500"
                value="> 1500"
                label="Over $1500"
              />
            </li>
          </ul>
        </mat-expansion-panel>
      </mat-accordion>
      <ng-container *ngIf="brands$ | async">
        <mat-accordion class="border-b">
          <mat-expansion-panel class="mat-elevation-z0" [expanded]="true">
            <mat-expansion-panel-header>
              <mat-panel-title class="text-[16px]"> Brand </mat-panel-title>
            </mat-expansion-panel-header>
            <ul formArrayName="brands" class="flex flex-col gap-2">
              <li *ngFor="let brand of brands.controls; let i = index">
                <app-custom-check-box
                  (changeHandler)="itemSelected($event, 'brand')"
                  [formControlName]="i"
                  [name]="localBrands[i].name"
                  [value]="localBrands[i].name"
                  [label]="localBrands[i].name"
                />
              </li>
            </ul>
          </mat-expansion-panel>
        </mat-accordion>
      </ng-container>
      <mat-accordion class="border-b">
        <mat-expansion-panel class="mat-elevation-z0" [expanded]="true">
          <mat-expansion-panel-header>
            <mat-panel-title class="text-[16px]"> Categories </mat-panel-title>
          </mat-expansion-panel-header>
          <ul
            formArrayName="categories"
            class="flex flex-col gap-2"
            *ngIf="categories$ | async"
          >
            <li *ngFor="let category of categories.controls; let i = index">
              <app-custom-check-box
                (changeHandler)="itemSelected($event, 'categories')"
                [formControlName]="i"
                [name]="localCategories[i].name"
                [value]="localCategories[i].name"
                [label]="localCategories[i].name"
              />
            </li>
          </ul>
        </mat-expansion-panel>
      </mat-accordion>
      <mat-accordion class="border-b">
        <mat-expansion-panel class="mat-elevation-z0" [expanded]="true">
          <mat-expansion-panel-header>
            <mat-panel-title class="text-[16px]"> Cases </mat-panel-title>
          </mat-expansion-panel-header>
          <ul
            formArrayName="productCase"
            class="flex flex-col gap-2"
            *ngIf="cases$ | async"
          >
            <li *ngFor="let case of cases.controls; let i = index">
              <app-custom-check-box
                (changeHandler)="itemSelected($event, 'productCase')"
                [formControlName]="i"
                [name]="localCases[i].name"
                [value]="localCases[i].name"
                [label]="localCases[i].name"
              />
            </li>
          </ul>
        </mat-expansion-panel>
      </mat-accordion>
    </form>
  </aside>